/* ===== Mobile Portrait (<=640px) â€” overrides only ===== */
/* Link with: media="(max-width: 640px) and (orientation: portrait)" */

#screen-app{grid-template-columns:1fr; grid-template-rows:auto minmax(40vh,1fr) auto; grid-template-areas:"sidebar" "stage" "footer"}
.sidebar{grid-area:sidebar}
.stage{grid-area:stage; padding-top:0}
.topbar{padding:0; padding-bottom:10px; padding-left:10px}

#onlineList{display:grid; grid-template-columns:repeat(2, minmax(0, 1fr)); gap:8px}
.user{padding:8px; border:1px solid var(--line); background:var(--panel); border-radius:12px; gap:8px}
.user:hover{background:rgba(255,255,255,.03)}

.tile .name{top:10px; bottom:unset}

/* Tiles: horizontal ribbon */
.tiles{display:grid !important; grid-template-columns:1fr !important; grid-template-rows:1fr !important}
.tiles-main{display:flex; gap:var(--tile-gap); align-items:anchor-center; overflow-x:auto; overflow-y:hidden; -webkit-overflow-scrolling:touch; overscroll-behavior-x:contain}
:root{ --m-tile-size: calc((100vw - env(safe-area-inset-left) - env(safe-area-inset-right) - (2 * var(--m-hpad)) - var(--tile-gap)) / 2 ); }
.tile{min-height:-webkit-fill-available; flex:0 0 var(--m-tile-size); width:var(--m-tile-size); height:var(--m-tile-size); aspect-ratio:auto !important; scroll-snap-align:start}
.tile .controls{display:none !important}
.tile video{width:100%; height:100%; object-fit:cover}

/* Custom scrollbar bar */
.tiles-sbar{position:absolute; left:var(--m-tiles-pad); right:calc(var(--m-tiles-pad) + env(safe-area-inset-right)); bottom:8px; height:8px; z-index:5; display:none}
.tiles-sbar.show{display:block}
.tiles-sbar .track{width:100%; height:100%; background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.12); border-radius:999px; position:relative}
.tiles-sbar .thumb{position:absolute; top:0; left:0; height:100%; background:var(--accent); border-radius:999px; box-shadow:0 1px 6px rgba(0,0,0,.35); touch-action:none; user-select:none; cursor:grab}
.tiles-sbar.dragging .thumb{cursor:grabbing}

/* Footer as swipe carousel */
.footer{grid-area:footer; display:block}
.foot-swipe{display:flex; overflow-x:auto; scroll-snap-type:x mandatory; -webkit-overflow-scrolling:touch; scrollbar-width:none; -ms-overflow-style:none}
.foot-swipe::-webkit-scrollbar{display:none}
.foot-pane{scroll-snap-align:start; flex:0 0 100%; padding:12px; padding-bottom:0; padding-top:0}
.foot-pane:last-child{border-right:none}
.footer-left{padding:0; border-right:none}
.footer-right{padding:0}
.chatbox{margin:0; height:100%}

.foot-dots{display:flex; justify-content:center; align-items:center; gap:10px; padding:5px}
.foot-dots .fdot{width:12px; height:16px; border-radius:50%; background:transparent; border:2px solid var(--dots); opacity:.85; transform:scale(.95); transition:transform .18s ease, opacity .18s ease, background .18s ease, border-color .18s ease}
.foot-dots .fdot.active{background:var(--dots); border-color:var(--dots); opacity:1; transform:scale(1.1)}
.foot-dots .fdot:focus-visible{outline:2px solid rgba(255,255,255,.6); outline-offset:2px}

.btn.send{margin-top:10px; width:-webkit-fill-available; background:var(--accent); border-color:transparent; display:block}
#btnShare{display:none !important}
.chat-log{max-height:135px}